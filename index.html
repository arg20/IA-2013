<!DOCTYPE html>
<html class=" js csstransitions">
<head>
    <title>IA - 2013</title>
    <meta charset="utf-8"/>
    <script type="text/javascript" src="js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/angular.min.1.1.5.js"></script>
    <script type="text/javascript" src="js/angular-dragdrop.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/localStorageModule.js"></script>
    <script type="text/javascript" src="js/spritely.js"></script>
    <script type="text/javascript" src="js/rotate.js"></script>
    <script type="text/javascript" src="js/game.js"></script>
    <script type="text/javascript">
        var app = angular.module('IA2013', ['LocalStorageModule', 'ngDragDrop']);
    </script>
    <script type="text/javascript" src="js/model/underscore.string.js"></script>
    <script type="text/javascript" src="js/jquery.pnotify.min.js"></script>

    <script type="text/javascript" src="js/highcharts.js"></script>
    <script type="text/javascript" src="js/model/util.js"></script>
    <script type="text/javascript" src="js/model/model.js"></script>
    <script type="text/javascript" src="js/controllers/controllers.js"></script>
    <script type="text/javascript" src="js/controllers/directives.js"></script>
    <link rel="stylesheet" type="text/css" href="css/app.css" media="all"/>

    <link rel="stylesheet" type="text/css" href="css/photon-min.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="css/photon-min-part2.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="css/animate.min.css" media="all"/>

</head>
<body ng-app="IA2013" class="body" ng-controller="AppCtrl">

<!--titulo-->
<div class="container-fluid dashboard dashboard-title">
    <div class="row-fluid">
        <div class="span12">
            <h1>
                Inteligencia Artificial 2013
            </h1>

            <div class="btn-group">
                <button type="button" class="btn btn-gear dropdown-toggle" data-toggle="dropdown"></button>
                <ul class="dropdown-menu">
                    <li><a href="javascript:">Integrantes del grupo</a></li>
                    <li><a href="javascript:" ng-click="reseteador.show()">Resetear aplicación</a></li>
                    <li><a href="javascript:">Cargar partida</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!--Barrita de menu-->
<div class="container-fluid dashboard dashboard-quick-launch">
    <div class="row-fluid">
        <div class="span12">
            <ul id="sortable" class="ui-sortable">
                <li>
                    <img src="img/icons/ql1-2x.png" alt="Quick Launch Icon" data-original-title="" title="">

                    <p>Juego</p>
                </li>
                <li>
                    <img src="img/icons/ql2-2x.png" alt="Quick Launch Icon" data-original-title="" title="">

                    <p>Estadísticas</p>
                </li>
                <li>
                    <img src="img/icons/ql5-2x.png" alt="Quick Launch Icon" data-original-title="" title="">

                    <p>Paper</p>
                </li>
                <li class="add-ql">
                    <a href="#modal-add-quick-launch" data-toggle="modal">
                        <div class="add-quick-launch" data-toggle="modal" id="addql"></div>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>

<!--widgets-->
<div class="container-fluid dashboard dashboard-widget-group">
<div class="row-fluid">
<div id="photon_widgets" class="span12 ui-sortable">

<widget skin="dark" widgetVar="widgetEstado">
    <front titulo="Estado General">
        <ul>
            <li>
                <span>Entorno</span>&nbsp;
                <div>
                    <span>{{isEntornoCreado()?  "Creado" : "No creado" }}</span>
                    <img ng-src="img/circulo-rojo.png" ng-hide="isEntornoCreado()" >
                    <img ng-src="img/circulo-verde.png" ng-show="isEntornoCreado()" ng-animate="{show: 'animated wobble'}" >
                    <!--<img ng-src="img/{{isEntornoCreado() && 'circulo-verde' || 'circulo-rojo' }}.png" alt="Arrow up">-->
                </div>
            </li>
            <li>
                <span>Agente:</span>&nbsp;Política
                <div>
                    <span>{{agente.politica.nombre? agente.politica.nombre : 'Ninguna'}}</span>
                    <img ng-src="img/circulo-rojo.png" ng-hide="isEntornoCreado()" >
                    <img ng-src="img/circulo-verde.png" ng-show="isEntornoCreado()" ng-animate="{show: 'animated wobble'}" >
                </div>
            </li>
            <li>
                <span>Agente:</span>&nbsp;estado
                <div>
                    <span>{{agente.entrenado? "Entrenado" : "Sin entrenar" }}</span>
                    <img ng-src="img/circulo-rojo.png" ng-hide="agente.entrenado" ng-animate="{show: 'animated wobble'}" >
                    <img ng-src="img/circulo-verde.png" ng-show="agente.entrenado" ng-animate="{show: 'animated wobble'}" >
                    <!--<img ng-src="img/{{agente.entrenado && 'circulo-verde' || 'circulo-rojo' }}.png" alt="Arrow up">-->
                </div>
            </li>
            <li>
                <span>Partidas</span>&nbsp;jugadas
                <div>
                    <span>{{entorno.partidasJugadas? entorno.partidasJugadas : 0}}</span>
                    <img ng-src="img/{{(entorno.partidasJugadas > 0) && 'circulo-verde' || 'circulo-rojo' }}.png"
                         alt="Arrow up">
                </div>
            </li>
            <li>
                <span>Partida</span>
                &nbsp;guardada
                <div>
                    <span>No</span>
                    <img src="img/circulo-rojo.png" alt="Arrow up">
                </div>
            </li>
        </ul>
    </front>
    <back>
        <form>
            <p class="widget-description flipper" style="color: white;">Resetear!</p>
            <a class="btn btn-large btn-danger flipper" ng-click="reseteador.show()">Volver a estado inicial!</a>
        </form>
    </back>
</widget>

<widget skin="white" widgetVar="widgetEntorno">
    <front titulo="Panel central">
        <h2 class="login-title" >Gestor de partida!</h2>
        <div class="login-member">
            <p style="margin-top: 0px;">Pódes <a class="flipper" >editar</a> el entorno</p>
        <a class="btn btn-large btn-success" ng-click="crearEntorno()" ng-hide="isEntornoCreado()" ng-animate="{show:'animated bounceIn'}" >Crear Entorno!</a>
        <a class="btn btn-large btn-inverse" ng-click="crearEntorno()" ng-show="isEntornoCreado()" ng-animate="{show:'animated flipInY'}" >Recrear Entorno!</a>
        </div>
        <span ng-show="isEntornoCreado()" ng-animate="'fade'" >
            <div class="opciones" style="text-align: center;">Opciones</div>
            <div class="btn-group"  style="margin-top: 5px;" ng-animate="{show:'animated flipInY', hide:'animated fadeOut'}" ng-show="isEntornoCreado()" >
                <a class="btn btn-large btn-primary" ng-click="editor.show()"  >Inspección</a>
                <a class="btn btn-large btn-danger" href="" ng-click="partida.show()">Partida</a>
            </div>
        </span>
    </front>
    <back>
        <div class="container-fluid widget-settings">
            <div class="row-fluid">
                <div class=span6>
                    <div class="control-group row-fluid">
                    <div class="span12">
                        <label class="control-label"><strong style="margin-left: 2px;">Mapa</strong></label>
                    </div>
                </div>
                <div class="control-group row-fluid">
                    <div class="span7">
                        <div class="controls">

                            <select ng-model="tamano" style="margin:5px 0px; width:130px" ng-change="actualizarTamano(tamano)" >
                                <option value="6">6x6</option>
                                <option value="7">7x7</option>
                                <option value="8">8x8</option>
                                <option value="9">9x9</option>
                                <option value="10">10x10</option>
                            </select>

                        </div>
                    </div>
                </div>

                <div class="control-group row-fluid" >
                    <div class="span12">
                        <label class="control-label">Paredes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pozos</label>
                    </div>
                </div>
                    <div class="control-group row-fluid">
                        <div class="span12">
                            <div class="controls">

                                <input type="number" name="" class="input-mini" style=" margin: 0px;" ng-model="configuracionEntorno.paredes"/>

                                <input type="number" name="" class="input-mini" style="margin: 0px 0px 0px 5px;"
                                       ng-model="configuracionEntorno.pozos"/>


                            </div>
                        </div>
                    </div>
                    <div class="row-fluid" style="margin-top: 5px;">
                        <div class="span12">
                            <label class="control-label" style="display:inline-block; "><strong>Premio & Castigo</strong></label>
<!--                            <input type="checkbox" name="aleatorio" id="aleatorio" ng-model="configuracionEntorno.aleatorio"
                                   style="margin:5px 0px; display:inline-block; "/>-->
                        </div>
                    </div>

                    <div class="control-group row-fluid">
                        <div class="span12">
                            <label class="control-label">Meta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pozo</label>
                        </div>
                    </div>
                    <div class="control-group row-fluid">
                        <div class="span12">
                            <div class="controls">

                                <input type="text" name="" class="input-mini" style="margin-left: 0px;margin-top: 0px;"
                                       ng-model="configuracionEntorno.recompensaMeta"/>

                            <input type="text" name="" class="input-mini" style="margin-left: 5px;margin-top: 0px;"
                                   ng-model="TipoCamino.POZO.recompensa"/>


                        </div>
                    </div>
                </div>
                </div>
                <div class="span6" style="color: white">
                    <div class="control-group row-fluid">
                        <div class="span12">
                            <label class="control-label" style="margin-left: 8px;"><strong>Recompensas</strong></label>
                        </div>
                    </div>
                    <div class="span12">
                        <label class="control-label" style="display:inline-block; "><strong>Malo: </strong></label>
                        <input type="text" style="margin:7px 14px; display:inline-block; " class="ng-pristine ng-valid input-mini" ng-model="TipoCamino.MALO.recompensa">
                    </div><div class="span12">
                        <label class="control-label" style="display:inline-block; "><strong>Nuetro: </strong></label>
                        <input type="text" style="margin:6px 0px; display:inline-block; " class="ng-pristine ng-valid input-mini" ng-model="TipoCamino.NEUTRAL.recompensa">
                    </div><div class="span12">
                        <label class="control-label" style="display:inline-block; "><strong>Bueno: </strong></label>
                        <input type="text" style="margin:6px 2px; display:inline-block; " class="ng-pristine ng-valid input-mini" ng-model="TipoCamino.BUENO.recompensa">
                    </div><div class="span12">
                        <label class="control-label" style="display:inline-block; "><strong>Exclte: </strong></label>
                        <input type="text" style="margin:6px 5px; display:inline-block; " class="ng-pristine ng-valid input-mini" ng-model="TipoCamino.EXCELENTE.recompensa">
                    </div>
                </div>
            </div>
        </div>
    </back>
</widget>

<!--placeholders-->
<div class="widget-holder blank-widget" ng-hide="entorno">
    <div class="widget-flipper">
        <div class="widget-area" style="padding:0px;">

        </div>
    </div>
</div>
<div class="widget-holder blank-widget" ng-hide="entorno">
    <div class="widget-flipper">
        <div class="widget-area" style="padding:0px;">

        </div>
    </div>
</div>
<div class="widget-holder blank-widget" ng-hide="entorno">
    <div class="widget-flipper">
        <div class="widget-area" style="padding:0px;">

        </div>
    </div>
</div>

<span ng-show="entorno" ng-animate="{show:'animated bounceIn', hide:'animated bounceOut'}">
    <widget widgetVar="widgetEntrenamiento">
        <front titulo="Fase de Entrenamiento" class="task-completion">
            <ul>
                <li>
                    Política de selección
                    <span>{{getPoliticaAgente()}}</span>
                </li>
                <li>Cantidad de ciclos
                    <span>{{entrenamiento.repeticiones}}</span>
                </li>
                <li>
                    <span><a class=" btn btn-small btn-primary btn-mini"
                             ng-click="amnesia()">Amnesia!</a></span>
                    <span><a class=" btn btn-small btn-danger btn-mini" ng-click="entrenamiento.entrenarTimeout()">Entrenar!</a></span>
                </li>
                <li class="processed-pct">
                    Entrenamiento:&nbsp;&nbsp;<span>{{entrenamiento.getPorcentajeEntrenamiento()}}%</span>

                    <div class="progress progress-info progress-striped active">
                        <div class="bar" data-target="0" ng-style="entrenamiento.getPorcentajeEntrenamientoBarra()" style="-webkit-transition: width 0s ease; transition: width 0s ease"></div>
                    </div>
                </li>
            </ul>
        </front>
        <back>
            <div class="container-fluid widget-settings" style="color: white;">
                <div class="control-group row-fluid">
                    <div class="span12">
                        <label class="control-label"><strong>Política de planificación</strong></label>
                    </div>
                </div>
                <div class="control-group row-fluid">
                    <div class="span12">
                        <div class="controls">
                            <select name="multiFilter" style="margin:5px 0px; width:105px;"
                                    ng-model="entrenamiento.politicaSeleccionada.nombre" ng-change="entrenamiento.actualizarPolitica()">
                                <option value="greedy">Greedy</option>
                                <option value="e-greedy">Soft</option>
                                <option value="aleatoria">Aleatoria</option>
                                <option value="softmax">Softmax</option>
                            </select>
                            &nbsp;<span style="color:white;" >Episodios:</span> <input type="number" name="reps" id="reps" ng-model="entrenamiento.repeticiones" style="margin: 0px 0; width:78px;" />
                        </div>
                    </div>
                </div>
                <div class="control-group row-fluid">
                    <div class="span12">
                        <label class="control-label"><strong>Q-learning</strong></label>
                        <label class="control-label">&nbsp;Alfa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gamma&nbsp;&nbsp;&nbsp;&nbsp;Q-inicial</label>
                    </div>
                </div>
                <div class="control-group row-fluid">
                    <div class="span12">
                        <div class="controls">
                            <input type="text" name="" placeholder="Alfa" class="input-mini"
                                   style="margin: 0px 3px 0px 0px; " ng-model="entrenamiento.qlearning.alfa"/>
                            <input type="text" name="" placeholder="Gamma" class="input-mini"
                                   style="margin: 0px 3px 0px 0px;" ng-model="entrenamiento.qlearning.gamma"/>
                            <input type="text" name="" placeholder="Q-inicial" class="input-mini"
                                   style="margin: 0px;" ng-model="entrenamiento.qlearning.qInicial"/>
                        </div>
                    </div>
                </div>
                <div class="control-group row-fluid">
                    <div class="span12">
                        <label class="control-label" style="margin-top: 5px;"><strong>Configuración de política</strong></label>
                    </div>
                </div>
                <div class="control-group row-fluid" ng-show="entrenamiento.politicaSeleccionada.isGreedySeleccionado()">
                    <div class="span12">
                        <div class="controls">
                            <div ng-show="grafico.estrategia.nombre === 'greedy'" style="">
                                <div class="input-prepend">
                                    <span class="add-on" style="color: black;" >ε</span>
                                    <input style="margin: 0px; width: 50px;" id="grdy" type="text" placeholder="Epsilon" ng-model="entrenamiento.politicaSeleccionada.epsilon" ng-change="grafico.estrategia.actualizarLabel()" class="ng-pristine ng-valid">
                                </div>
                            </div>
                            <!--<strong style="color: white; font-size: 24px;">ε&nbsp;&nbsp;&nbsp;</strong><input type="text" name="" placeholder="Epsilon" class="input-small"
                                   style="margin: 0px 0;" ng-model="entrenamiento.politicaSeleccionada.epsilon"/>-->
                        </div>
                    </div>
                </div>
                <div class="control-group row-fluid" ng-show="entrenamiento.politicaSeleccionada.isEGreedySeleccionado()">
                    <div class="span12">
                        <div class="controls">
                            <strong style="color: white; font-size: 24px;">ε&nbsp;&nbsp;&nbsp;</strong><input type="text" name="" placeholder="Epsilon" class="input-small"
                                   style="margin: 0px 0;" ng-model="entrenamiento.politicaSeleccionada.epsilon"/>
                        </div>
                    </div>
                </div>
                <div class="control-group row-fluid" ng-show="entrenamiento.politicaSeleccionada.isSoftmaxSeleccionado()">
                    <div class="span12">
                        <div class="controls" style="color: white;">
                            <div class="input-prepend">
                                <span class="add-on" style="color: black;" >τ</span>
                                <input style="margin: 0px; width: 50px;" id="grdy" type="text" placeholder="Tau" ng-model="entrenamiento.politicaSeleccionada.tau" ng-change="grafico.estrategia.actualizarLabel()" class="ng-pristine ng-valid">
                            </div>
                            <!--<strong style="color: white; font-size: 24px;">τ</strong>= &nbsp;<input type="text" name="" placeholder="tau" class="input-small"
                                   style="margin: 0px 0;" ng-model="entrenamiento.politicaSeleccionada.tau"/>-->
                        </div>
                    </div>
                </div>
            </div>

        </back>
    </widget>

    <widget skin="white" widgetVar="resultadoEntrenamiento">
        <front titulo="Informe del Coach">
            <!--<p class="widget-description" style="margin: 5px;" ng-hide="entrenamiento.completado">
                Se mostrarán los resultados del entrenamiento una vez que haya entrenado al agente.
            </p>-->
            <img src="img/agente-min.png" style="height: 198px;" alt="agente-meme" ng-hide="entrenamiento.completado" />
            <span ng-show="entrenamiento.completado">

                <chart id="chartie" value="graficoResultadoEntrenamiento"></chart>
            </span>
        </front>
        <back>
        </back>
    </widget>

    <widget widgetVar="partidaWidger">
        <front titulo="Panel de control" class="panel-control" >

            <ul>
                <li>
                     No se me ocurre que mostrar en esta seccion
                </li>
                <li class="smaller"><a class="btn btn-mini btn-primary" ng-click="establecerConocimientoActualComoPoliticaOptima()" >Óptima</a></li>
                <li class="smaller"><a class="btn btn-mini btn-success" ng-click="entrenamiento.entrenarTimeout(callbacksParaEntrenamiento);graficoComparativoModal.show();" >Comparar</a></li>
                <li class="bottom" style="padding-top: 1px;" >
                    <div style="float:left; margin-right: 10px;">
                        <div style="float: none; margin-left: 0px;">Explorador de la matriz Q</div>
                        <div style="float: left; margin: 10px 0px 0px 20px">
                            i= <input type="number" min="0" max="{{entorno.mapa.filas}}" ng-model="consulta.fila" style="width: 35px; padding: 1px; margin-top: 5px;" placeholder="i" ng-change="consulta.consultarQs(consulta.fila, consulta.columna)" /> j=
                            <input type="number" min="0" max="{{entorno.mapa.columnas}}" ng-model="consulta.columna" placeholder="j" style="width: 35px; padding: 1px; margin-top: 5px;" ng-change="consulta.consultarQs(consulta.fila, consulta.columna)" />
                        </div></div>
                    <div style="float: right;">
                        <div style="float:none; ">
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[7]" />
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[0]" />
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[1]" />
                        </div>
                        <div style="float:none; margin-top: 3px; margin-bottom: 3px;" >
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[6]" />
                            <span style="width: 35px;">{{consulta.fila}} x {{consulta.columna}}</span>
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[2]" />
                        </div>
                        <div style="float:none; ">
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[5]" />
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[4]" />
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[3]" />
                        </div>
                    </div>
                </li>
            </ul>

            <!--<div class="row" style="margin-left: 0px;">
                <div class="span7" style="border-right-width: 1px; border-right-style: dashed; border-bottom-width: 1px; border-bottom-style: solid;">
                    <strong>Consultas a matriz Q</strong>
                    <br>
                    <input type="text" ng-model="consulta.fila" style="width: 35px;" placeholder="i" />x
                    <input type="text" ng-model="consulta.columna" placeholder="j" style="width: 35px;" />A(
                    <input type="text" ng-model="consulta.accion" placeholder="a" style="width: 35px;" />)
                    <br />
                    Q = {{consulta.consultarQ(consulta.fila,consulta.columna,consulta.accion)}}
                </div>
                <div class="span4">h</div>
            </div>-->
        </front>
        <back>

        </back>
    </widget>

</span>

<div class="widget-holder blank-widget" ng-hide="isEntornoCreado()" >
    <div class="widget-flipper">
        <div class="widget-area" style="padding:0px;">

        </div>
    </div>
</div>

<span ng-show="isEntornoCreado()" ng-hide="!isEntornoCreado()" ng-animate="{show: 'animated flipInX'}" >
    <!--<widget skin="white" >
        <front titulo="Grafico comparativo">
            <div class="row-fluid">
                <table>
                    <thead>
                    <td>Política</td>
                    <td>Parámetros</td>
                    <td>Acciones</td>
                    </thead>
                    <tbody>
                      <tr ng-repeat="estrategia in grafico.estrategiasAComparar" >
                          <td>{{estrategia.nombre}}</td>
                          <td>{{estrategia.epsilon? estrategia.epsilon : estrategia.tau}}</td>
                          <td><button class="btn btn-danger btn-mini">Borrar</button></td>
                      </tr>
                      <tr>
                         <td><select name="estrategiaSelecter" style="margin:5px 0px; width:105px;"
                                     ng-model="grafico.estrategia.nombre" ng-change="grafico.estrategia.actualizarLabel()" >
                             <option value="greedy">Greedy</option>
                             <option value="e-greedy">Soft</option>
                             <option value="aleatoria">Aleatoria</option>
                             <option value="softmax">Softmax</option>
                         </select>
                         </td>
                          <td>
                              <div ng-show="grafico.estrategia.nombre === 'greedy'" >
                                  <div class="input-prepend">
                                      <span class="add-on">ε</span>
                                      <input style="margin: 0px; width: 50px;" id="grdy" type="text" placeholder="Epsilon" ng-model="grafico.estrategia.parametros.epsilon" ng-change="grafico.estrategia.actualizarLabel()">
                                  </div>
                              </div>

                              <div ng-show="grafico.estrategia.nombre === 'softmax'" >
                                  <div class="input-prepend">
                                      <span class="add-on">τ</span>
                                      <input style="margin: 0px; width: 50px;" id="sfmx" type="text" placeholder="Tau" ng-model="grafico.estrategia.parametros.tau" ng-change="grafico.estrategia.actualizarLabel()" >
                                  </div>
                              </div>
                              <div ng-show="grafico.estrategia.nombre === 'aleatoria'">
                                  Sin parámetros
                              </div>

                          </td>
                          <td>
                              <a class="btn btn-primary btn-mini" ng-click="grafico.agregarEstrategia(grafico.estrategia)" >Agregar</a>
                          </td>
                      </tr>
                    </tbody>
                </table>
&lt;!&ndash;                <div class="span3">
                    <input type="text" name="" id="asd" ng-model="grafico.estrategia.label"/>
                </div>&ndash;&gt;
                <div class="span12">
                    &lt;!&ndash;<a class="btn btn-primary" ng-click="grafico.agregarEstrategia(grafico.estrategia)" >Agregar</a>&ndash;&gt;
                    &lt;!&ndash;<button class="btn btn-success btn-small" ng-click="grafico.agregarEstrategia(grafico.estrategia)">
                        <img src="img/agregarChart.png" alt=""/>
                    </button>&ndash;&gt;

                </div>
            </div>
        </front>
        <back>
            <div class="container-fluid widget-settings">
                <div class="row-fluid">
                    <div class=span6>
                        <div class="control-group row-fluid">
                            <div class="span12">
                                <label class="control-label"><strong style="margin-left: 2px;">Episodios</strong></label>
                            </div>
                        </div>
                        <div class="control-group row-fluid">
                            <div class="span7">
                                <div class="controls">
                                    <input type="text" name="" id="episodiosGrafico" ng-model="grafico.cantidadDeEpisodios"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </back>
    </widget>-->
</span>
 <span ng-show="isEntornoCreado()" ng-hide="!isEntornoCreado()" ng-animate="{show: 'animated flipInX'}" >
<widget skin="white" >
    <front titulo="Comparar estrategias" >
        <table class="table table-striped">
            <thead class="">
            <tr>
                <th>#</th>
                <th>Política</th>
                <th>Parámetros</th>
                <th>Acciones</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="estrategia in grafico.estrategiasAComparar" >
                <td>{{$index + 1}}</td>
                <td>{{estrategia.nombre}}</td>
                <td>{{estrategia.epsilon? estrategia.epsilon : estrategia.tau}}</td>
                <td>
                    <button class="btn btn-danger btn-mini">
                        <i class="icon-photon move_alt2"></i>
                    </button>
                </td>
            </tr>
            <tr ng-hide="grafico.estrategiasAComparar.length > 3" >
                <td>{{grafico.estrategiasAComparar.length + 1}}</td>
                <td>
                    <select name="estrategiaSelecter" style="margin:0px; width:70px; height:20px;"
                            ng-model="grafico.estrategia.nombre" ng-change="grafico.estrategia.actualizarLabel()" >
                        <option value="greedy">Greedy</option>
                        <option value="e-greedy">Soft</option>
                        <option value="aleatoria">Aleatoria</option>
                        <option value="softmax">Softmax</option>
                    </select>
                </td>
                <td>
                    <div ng-show="grafico.estrategia.nombre === 'greedy'" >
                        ε: <input style="margin: 0px; width: 45px; height:20px;" id="grdy" type="text" placeholder="Epsilon" ng-model="grafico.estrategia.parametros.epsilon" ng-change="grafico.estrategia.actualizarLabel()">
                </div>

                    <div ng-show="grafico.estrategia.nombre === 'softmax'" >
                        <div class="input-prepend">
                            <span class="add-on">τ</span>
                            <input style="margin: 0px; padding: 0px; width: 45px;" id="sfmx" type="text" placeholder="Tau" ng-model="grafico.estrategia.parametros.tau" ng-change="grafico.estrategia.actualizarLabel()" >
                        </div>
                    </div>
                    <div ng-show="grafico.estrategia.nombre === 'aleatoria'">
                        No Disp.
                    </div>
                </td>
                <td><a class="btn btn-primary btn-mini" ng-click="grafico.agregarEstrategia(grafico.estrategia)" >Agregar</a></td>
            </tr>
            </tbody>
        </table>
    </front>
    <back>
        <div class="container-fluid widget-settings">
            <div class="row-fluid">
                <div class=span6>
                    <div class="control-group row-fluid">
                        <div class="span12">
                            <label class="control-label"><strong style="margin-left: 2px;">Episodios</strong></label>
                        </div>
                    </div>
                    <div class="control-group row-fluid">
                        <div class="span7">
                            <div class="controls">

                                <input type="text" name="" id="" ng-model="grafico.episodiosAGraficar" />

                            </div>
                        </div>
                    </div>
                    <a class="btn btn-primary" ng-click="grafico.prepararDatos()" >Comparar!</a>
                    <a class="btn btn-primary" ng-click="graficoComparativoModal.show()" ng-show="isGraficoComparativoCreado" >Ver Gráfico</a>
                </div>
            </div>
        </div>
    </back>
</widget>
 </span>
</div>
</div>
</div>

<!--Marca de agua-->
<div class="dashboard-watermark"></div>


<!--Ventanas modal-->
<modal header="Reiniciar la aplicación" widgetvar="reseteador" >
    <contenido>
        <p>¿Está seguro de que desea resetear el estado actual?</p>
    </contenido>
    <bottom>
        <button class="btn" ng-click="reseteador.hide()" aria-hidden="true">No, me equivoqué</button>
        <button class="btn btn-danger" ng-click="resetear(); reseteador.hide();">Si!</button>
    </bottom>
</modal>

<modal header="Editar mapa" widgetvar="editor">
    <contenido>
        <form class="form-horizontal" style="display: inline-block; margin-right:5px;">
            <div class="container-fluid" style="margin: 0px;">
                <div class="form-legend" id="Input_Field">Mapa</div>
                <table class="mapa editable">
                    <tr ng-repeat="fila in mapa.mapa track by $index">
                        <td ng-repeat="columna in fila track by $index" jqyoui-droppable="opcionesCasillero"  data-drop="true" ng-class="columna.nombre" fila="{{$parent.$index}}" columna="{{$index}}" ng-click="editor.pintar($parent.$index,$index)" ng-model="posicion" ng-mouseenter="mensajes.editor.mouseSobre.x = $parent.$index; mensajes.editor.mouseSobre.y = $index; consulta.consultarQs($parent.$index,$index);" >
                            <img src="img/juego/meta.png" alt="meta" if="isMeta($parent.$index, $index)" style="margin-left:15px; margin-top: -20px;float: left; cursor: -webkit-grab; cursor: -moz-grab; position: absolute" jqyoui-draggable="{onStart: 'cursorChanger'}" data-drag="true" ng-model="meta" data-jqyoui-options="{revert: true, revertDuration: 150}" />
                        </td>
                    </tr>
                </table>
            </div>
        </form>

        <form class="form-horizontal" style="display: inline-block; width: 168px;">
            <div class="container-fluid" style="margin: 0px;">
            <div class="form-legend" id="Info">Información</div>
            <div class="control-group row-fluid">
                <div class="span3">
                <table class="mapa">
                    <tr><td ><a class="darken" style="cursor: url('img/cuentagotas.png') 0 21, crosshair;" ng-click="editor.seleccionarPincel('Bueno')" title="Buen camino" data-toggle="tooltip" id="pincel-camino-bueno" ><img src="img/juego/bueno.png" alt="" /></a></td></tr>
                    <tr><td><a class="darken cuentagotas" style="cursor: url('img/cuentagotas.png') 0 21, crosshair;" ng-click="editor.seleccionarPincel('Excelente')"><img src="img/juego/excelente.png" alt=""/></a></td></tr>
                    <tr><td><a class="darken cuentagotas" style="cursor: url('img/cuentagotas.png') 0 21, crosshair;" ng-click="editor.seleccionarPincel('Neutral')"><img src="img/juego/neutral.png" alt=""/></a></td></tr>
                    <tr><td><a class="darken cuentagotas" style="cursor: url('img/cuentagotas.png') 0 21, crosshair;" ng-click="editor.seleccionarPincel('Malo')"><img src="img/juego/malo.png" alt=""/></a></td></tr>
                    <tr><td><a class="darken cuentagotas" style="cursor: url('img/cuentagotas.png') 0 21, crosshair;" ng-click="editor.seleccionarPincel('Pozo')"><img src="img/juego/pozo.png" alt=""/></a></td></tr>
                    <tr><td><a class="darken cuentagotas" style="cursor: url('img/cuentagotas.png') 0 21, crosshair;" ng-click="editor.seleccionarPincel('Pared')"><img src="img/juego/pared.png" alt=""/></a></td></tr>
                </table></div>
                <div class="span9">
                    <p  >Puntero:&nbsp;{{mensajes.editor.posicionHovered()}}.</p>
                    <p  >Pincel:&nbsp;{{mensajes.editor.pincelSeleccionado()}}.</p>
                    <div style="float: left;">
                        <div style="float:none; ">
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[7]" />
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[0]" />
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[1]" />
                        </div>
                        <div style="float:none; margin-top: 3px; margin-bottom: 3px;" >
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[6]" />
                            <span style="width: 35px;">&nbsp;{{mensajes.editor.posicionHovered()}}</span>
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[2]" />
                        </div>
                        <div style="float:none; ">
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[5]" />
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[4]" />
                            <input type="text" name="a7" id="a7" style="width: 35px; margin: 0px; padding: 1px; font-size: 11px;" ng-model="consulta.resultado[3]" />
                        </div>
                </div>
                    </div>
            </div>
        </div>
        </form>
    </contenido>
    <bottom>
        <button class="btn btn-danger" ng-click="editor.hide()" aria-hidden="true" >Cerrar</button>
    </bottom>
</modal>

<modal header="Jugar un partida" widgetvar="partida" >
    <contenido>
        <div class="row-fluid">
            <div class="span9">
                <table class="mapa" style="float: left; margin-right: 10px;">
                    <tr ng-repeat="fila in mapa.mapa track by $index">
                        <td ng-repeat="columna in fila track by $index" ng-class="columna.nombre" fila="{{$parent.$index}}" columna="{{$index}}" jqyoui-droppable="opcionesCasillero" data-drop="true" ng-model="posicion" >
                            <img src="img/juego/meta.png" alt="meta" if="isMeta($parent.$index, $index)" style="margin-left:15px; margin-top: -20px;float: left; position: absolute" />
                            <div if="isPosicionInicial($parent.$index, $index)" style="height: 25px;width: 25px; padding-left: 3px; margin-top: 2px" >
                                <agente widgetvar="entorno.agente.agenteView" mapa="entorno.mapa" jqyoui-draggable="agenteOpciones" data-jqyoui-options="{revert: 'invalid',revertDuration: 150}" data-drag="true" ng-model="agente" > </agente>
                            </div>
                        </td>
                    </tr>

                </table>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span9">
                {{mensajes.mensajeJuego}}
            </div>
        </div>
    </contenido>
    <bottom>
        <button class="btn btn-inverse" ng-click="moverAgenteAleatoriamente()" aria-hidden="true">Resetear</button>
        <button class="btn btn-danger" ng-click="partida.hide()" aria-hidden="true">Cerrar</button>
        <button class="btn btn-success" ng-click="jugar()">Jugar</button>
    </bottom>
</modal>

<modal header="Grafico comparativo" widgetvar="graficoComparativoModal" >
    <contenido>
        <chart value="graficoComparativo" recreate="true" > </chart>
    </contenido>
    <bottom>
        <button class="btn btn-danger" ng-click="graficoComparativoModal.hide()" aria-hidden="true">Cerrar</button>
    </bottom>
</modal>


<modal header="Establecer Política óptima" widgetvar="tomarPoliticaOptimaModal" >
    <contenido>
        <p>Para generar el gráfico de comparación de estrategias de selección de acción durante el entrenamiento, debe primero
        establecer cual es la política óptima. Para ello, primero se entrena exhaustivamente al agente. En nuestras pruebas, la
        matriz Q suele estabilizarse luego de aproximadamente 5000 iteraciones en los mapas más grandes. Si ya ha entrenado al agente
        Puede </p>
    </contenido>
    <bottom>
        <button class="btn btn-danger" ng-click="graficoComparativoModal.hide()" aria-hidden="true">Cerrar</button>
    </bottom>
</modal>

<modal header="Selección de política óptima" widgetvar="seleccionPoliticaOptimaModal" >
    <content>
        <p>Para poder crear el gráfico de comparación de estrategias de selección de acción, es necesario primero aproximar la política óptima.</p>
        <p>El agente ya ha sido entrenado, desea seleccionar la Matriz Q actual como óptima? </p>
    </content>
    <bottom>
        <a class="btn btn-success" >Si</a>
        <a class="btn btn-danger" ng-click="seleccionPoliticaOptimaModal.hide()" >No</a>
    </bottom>
</modal>


</body>
</html>


